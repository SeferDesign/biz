<% provide(:title, "Invoice ##{@invoice.id} | ") %>
<section id="invoice-show">
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<% if @invoice.client.logo.present? %>
				<%= image_tag(@invoice.client.logo.url(:medium), class: 'pull-right hidden-xs') %>
				<% end %>
				<h1>Invoice #<%= @invoice.id %></h1>
				<p class="doicons">
					<%= link_to invoice_path(:format=>'pdf'), title: 'PDF' do %><i class="fa fa-fw fa-2x fa-file text-success"></i><% end %>
					<%= link_to edit_invoice_path(@invoice), title: 'Edit' do %><i class="fa fa-fw fa-2x fa-pencil-square-o text-warning"></i><% end %>
					<%= link_to invoice_path(@invoice), title: 'Delete', method: :delete, data: { confirm: "Are you sure you would like to delete Invoice ##{@invoice.id}?" } do %><i class="fa fa-fw fa-2x fa-trash-o text-danger"></i><% end %>
					<%= link_to email_invoice_path(@invoice), title: 'Send' do %><i class="fa fa-fw fa-2x fa-envelope text-success"></i><% end %>
				</p>
				<p>
					<strong>Client:</strong>
					<%= link_to @invoice.client do %><%= @invoice.client.name %><% end %>
				</p>
				<p>
					<strong>Project:</strong>
					<%= link_to @invoice.project do %><%= @invoice.project.name %><% end %>
				</p>
				<p><strong>Description:</strong></p>
				<p><%= @invoice.description %></p>
				<p>
					<strong>Date:</strong>
					<%= @invoice.date.to_formatted_s(:long) %>
				</p>
				<p>
					<strong>Work Type:</strong>
					<%= @invoice.worktype %>
				</p>
				<p>
					<strong>Cost:</strong>
					<%= number_to_currency(@invoice.cost, { :negative_format => '(%n)' }) %>
				</p>
				<p>
					<strong>Paid?:</strong>
					<% if @invoice.paid == true %><i class="fa fa-check green"></i><% else %><span class="spread red">Not Paid</span><% end %>
				</p>
				<% if @invoice.paid == true %>
				<p>
					<strong>Paid Date:</strong>
					<%= @invoice.paiddate.to_formatted_s(:long) %>
				</p>
				<p>
					<strong>Payment Method:</strong>
					<%= @invoice.paymenttype %>
				</p>
				<% end %>
			</div>
		</div>
		<% if !@invoice.lines.blank? %>
		<table class="table table-condensed">
			<thead>
				<tr>
					<th>&nbsp;</th>
					<th>Description</th>
					<th class="text-center">Hours</th>
					<th class="text-center">Rate ($) per Hour</th>
					<th class="text-center">Cost</th>
				</tr>
			</thead>
			<tbody>
				<%= render @invoice.lines %>
				<tr>
					<td>&nbsp;</td>
					<td class="text-right" colspan="3"><strong>Total</strong>&nbsp;&nbsp;</td>
					<td><strong><div class="pull-right"><%= number_to_currency(@invoice.lines.sum('total'), { :unit => '', :negative_format => '(%n)' }) %></div>$</strong></td>
				</tr>
			</tbody>
		</table>
		<% end %>
		<h2>Add a line:</h2>
		<%= render 'lines/form' %>
		<div class="row hidden-print">
			<div class="col-sm-12">
				<p><%= link_to 'Back', invoices_path %></p>
			</div>
		</div>
	</div>
</section>
