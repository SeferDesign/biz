<section id="invoice-show">
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<% thisClient = Client.find(@invoice.clientid) %>
				<% thisProject = Project.find(@invoice.projectid) %>
				<% if !thisClient.logo.blank? %>
				<%= image_tag(thisClient.logo.url(:medium), class: 'pull-right hidden-xs') %>
				<% end %>
				<h1>Invoice #<%= @invoice.id %></h1>
				<p>
					<strong>Client:</strong>
					<%= link_to thisClient do %><%= thisClient.name %><% end %>
				</p>
				<p>
					<strong>Project:</strong>
					<%= link_to thisProject do %><%= thisProject.name %><% end %>
				</p>
				<p><strong>Description:</strong></p>
				<p><%= @invoice.description %></p>
				<p>
					<strong>Date:</strong>
					<%= @invoice.date.to_formatted_s(:long) %>
				</p>
				<p>
					<strong>Work Type:</strong>
					<%= @invoice.worktype %>
				</p>
				<p>
					<strong>Cost:</strong>
					$<%= number_with_precision(@invoice.cost, :precision => 2, :delimiter => ',') %>
				</p>
				<p>
					<strong>Paid?:</strong>
					<% if @invoice.paid == true %><i class="fa fa-check green"></i><% else %><span class="spread red">Not Paid</span><% end %>
				</p>
				<% if @invoice.paid == true %>
				<p>
					<strong>Paid Date:</strong>
					<%= @invoice.paiddate.to_formatted_s(:long) %>
				</p>
				<p>
					<strong>Payment Type:</strong>
					<%= @invoice.paymenttype %>
				</p>
				<% end %>
			</div>
		</div>
		<table class="table table-condensed">
      <thead>
        <tr>
        	<th>&nbsp;</th>
          <th>Description</th>
          <th class="text-center">Hours</th>
          <th class="text-center">Rate / Hour ($)</th>
          <th class="text-center">Cost</th>
        </tr>
      </thead>
      <tbody>
	      <%= render @invoice.lines %>
	      <tr>
	      	<td>&nbsp;</td>
	        <td class="text-right" colspan="3"><strong>Total</strong>&nbsp;&nbsp;</td>
	        <td><strong><div class="pull-right"><%= number_with_precision(@invoice.lines.sum('total'), :precision => 2) %></div>$</strong></td>
	      </tr>
	    </tbody>
	  </table>
		<h2>Add a line:</h2>
		<%= render 'lines/form' %>
		<div class="row hidden-print">
			<div class="col-sm-12">
				<%= link_to invoice_path(:format=>'pdf'), { :class => 'pull-right btn btn-success' } do %><i class="fa fa-file-o left"></i>PDF<% end %>
				<p><%= link_to edit_invoice_path(@invoice), { :class => 'btn btn-warning' } do %><i class="fa fa-pencil-square-o left"></i>Edit<% end %> <%= link_to invoice_path(@invoice), method: :delete, data: { confirm: "Are you sure you would like to delete Invoice ##{@invoice.id}?" }, class: 'btn btn-danger' do %><i class="fa fa-trash-o left"></i>Delete<% end %></p>
				<p><%= link_to 'Back', invoices_path %></p>
			</div>
		</div>
	</div>
</section>