<section id="clients-list">
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<h1>Clients</h1>
				<p><%= link_to 'Home', root_path %></p>
				<p><%= link_to new_client_path, { :class => 'btn btn-success' } do %><i class="fa fa-plus left"></i>New Client<% end %></p>
				<% if @clients.blank? %>
				<p class="lead">No clients.</p>
				<% else %>
				<div class="row">
					<div class="col-sm-12">
						<table class="table table-condensed">
							<thead>
								<tr>
									<th>Client</th>
									<th class="hidden-xs">Contact</th>
									<th class="hidden-xs">Site</th>
									<th class="text-right hidden-xs">Unpaid</th>
									<th class="text-right">Billed</th>
								</tr>
							</thead>
							<tbody>
								<% @clients.sort { |a,b| a.name <=> b.name }.each do |client| %>
								<tr id="clientrow<%= client.id %>">
									<td><%= link_to client do %><%= client.name %><% end %></td>
									<td class="hidden-xs"><%= client.contact %></td>
									<td class="hidden-xs"><%= link_to client.site_url do %><%= client.site_url %><% end %></td>
									<td class="text-right hidden-xs"><% if Invoice.where(:clientid => client.id, :paid=> false).sum('cost') > 0 %><span class="spread red">$<%= number_with_precision(Invoice.where(:clientid => client.id, :paid=> false).sum('cost'), :precision => 2, :delimiter => ',') %></span><% else %>&mdash;<% end %></td>
									<td class="text-right">$<%= number_with_precision(Invoice.where(:clientid => client.id).sum('cost'), :precision => 2, :delimiter => ',') %></td>
								</tr>
								<% end %>
							</tbody>
						</table>
					</div>
				</div>
				<% end %>
			</div>
		</div>
	</div>
</section>